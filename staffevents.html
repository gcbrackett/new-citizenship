<!DOCTYPE html>
<html>
	<head id="citizenship">
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Staff Events</title>
		<link rel="stylesheet" href="css/jquery.mobile.icons.min.css" />
		<link rel="stylesheet" href="css/jquery.mobile.structure-1.4.2.min.css" />
		<link rel="stylesheet" href="css/themes/citizenship/citizenship.min.css" />
		<link rel="stylesheet" href="css/themes/citizenship/custom.css" />
		<script src="js/jquery.js"></script>
		<script src="js/functions.js"></script>
		<script src="js/jquery.mobile-1.4.2.min.js"></script>
	</head>
    <body>
		<div id="staffevents" data-role="page" data-theme="a" data-dom-cache="false"> <!-- event table -->
			<div data-role="header" data-position="fixed" id="eventsheader">
				<a href='staffselect.html' data-iconpos="notext" data-icon="back" data-mini='true'  
						data-transition="slide" data-direction="reverse" id="backButton">Back</a>
				<h1>Staff Events</h1>
			</div>
			<p class="info-strip" id="infoStrip">Info</p>
			<div role="main" id="mainContent" class="ui-content">
				<div style="padding: 0; margin: 0" id="staffNameHeader">
					<!-- <p id="staffName" style="margin: 0px">Staff Name</p> -->
				</div>
				<div id="eventSpace">
					<table data-role="table" id="eventTable" data-mode="columntoggle" data-column-btn-text="Show/Hide Columns..." class="event-list ui-responsive table-stroke">
						<thead>	<!-- column head row here -->
							<tr>
								<th data-priority="3">Date</th>
								<th data-priority="2">Student</th>
								<th>Events</th>
							</tr>
						</thead>
						<tbody>
							<!-- event list here -->
						</tbody>	
					</table> <!-- /event table -->		
				</div>
			</div> <!-- /main content -->
			<script>
				$('body').on( 'pagecontainershow', function( event, ui ) {
					if ( $('body').pagecontainer("getActivePage").attr('id') == "staffevents") {		//only for this page, no dialogs etc.
						if ( typeof ui.prevPage[0] == "undefined" ) {							//for first entry
							console.log('undefined branch');
							initialize('staffevents');
						} else {
							var prevID = $( ui.prevPage[0] ).attr('id');
							var initPageIDs = "staffselect";
							if ( countOcurrences( initPageIDs, prevID ) > 0 ) {			//for entry from another page
								console.log( 'entry from page ' + prevID );
								$( ui.prevPage[0] ).remove();
								initialize("staffevents");
							}
						}			
					}
				});
			
				$('#staffevents').on("pageshow", function() {
					initialize('staffevents');
					setTimeout( function() {
						$('p#infoStrip').text( localStorage.currDBName );
					}, 1000 );
				});
			</script>		
		</div><!-- /staffevents page -->
	</body>
</html>
